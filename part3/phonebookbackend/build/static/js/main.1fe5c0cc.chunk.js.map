{"version":3,"sources":["personService.js","index.js"],"names":["baseUrl","getAll","a","axios","get","create","newObject","post","deletePerson","id","delete","catch","err","response","status","Error","config","url","updatePerson","person","put","Filter","value","onChange","Persons","persons","newPhoneSearch","deletePersonHandler","map","name","indexOf","number","type","onClick","PersonForm","newName","newPhone","handleChangeName","handleChangePhone","handleAdd","Notification","message","className","color","App","useState","setPersons","setNewName","setNewPhone","setNewPhoneSearch","errorMessage","setErrorMessage","useEffect","data","console","log","findPerson","filter","isConfirmed","length","confirm","event","target","document","addEventListener","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.1fe5c0cc.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons';\n\nexport const getAll = async () => {\n    return await axios.get(baseUrl);\n}\n\nexport const create = async (newObject) => {\n    return await axios.post(baseUrl, newObject);\n}\n\nexport const deletePerson = async (id) => {\n    try {\n        await axios.delete(`${baseUrl}/${id}`).catch(err => {\n            if (err.response.status === 404) {\n                throw new Error(`${err.config.url} not found`);\n            }\n            throw err;\n        });;\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\nexport const updatePerson = async (person) => {\n    await axios.put(`${baseUrl}/${person.id}`, person);\n}","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom';\nimport { create, getAll, deletePerson, updatePerson } from './personService.js';\nimport './index.css';\n\nconst Filter = ({ value, onChange }) => {\n  return (\n    <div>\n      filter shown with: <input value={value} onChange={onChange} />\n    </div>\n  );\n}\n\nconst Persons = ({ persons, newPhoneSearch, deletePersonHandler }) => {\n\n  return (\n    <div>\n      {persons.map((person) => {\n        if (person.name.indexOf(newPhoneSearch) > -1) {\n          return <p>{person.name} {person.number} <button type=\"button\" onClick={() => deletePersonHandler(person)}>delete</button></p>;\n        } else {\n          return null;\n        }\n      })}\n    </div>\n  );\n}\n\nconst PersonForm = ({ newName, newPhone, handleChangeName, handleChangePhone, handleAdd }) => {\n  return (\n    <form>\n      <div>\n        name: <input value={newName} onChange={handleChangeName} /><br />\n        number: <input value={newPhone} onChange={handleChangePhone} />\n      </div>\n      <div>\n        <button type=\"button\" onClick={handleAdd}>add</button>\n      </div>\n    </form>\n  );\n}\n\nconst Notification = ({ message }) => {\n  return (\n    <p className={`error-message-${message.color}`}>{message.message}</p>\n  );\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([\n    { name: 'Arto Hellas' }\n  ])\n  const [newName, setNewName] = useState('')\n  const [newPhone, setNewPhone] = useState('')\n  const [newPhoneSearch, setNewPhoneSearch] = useState('')\n  const [errorMessage, setErrorMessage] = useState({});\n\n  useEffect(async () => {\n    const data = await getAll();\n    console.log(data.data);\n    setPersons(data.data);\n  }, []);\n\n  const deletePersonHandler = async (person) => {\n    const deleted = await deletePerson(person.id);\n    if (!deleted) {\n      setErrorMessage({ message: 'Information of ' + person.name + 'has already been removed from server', color: 'red' });\n    }\n    const data = await getAll();\n    setPersons(data.data);\n  }\n\n  const handleChangeName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleChangePhone = (event) => {\n    setNewPhone(event.target.value)\n  }\n\n  const addPerson = async (data) => {\n    await create(data);\n  }\n\n  const handleAdd = async () => {\n    const findPerson = persons.filter((person) => person.name === newName);\n    let isConfirmed = false;\n    if (!!findPerson.length) {\n      console.log(persons, findPerson);\n      // eslint-disable-next-line no-restricted-globals\n      isConfirmed = confirm(`${newName} is already added to phonebook, replace the old number with a new one ^_^`);\n    }\n\n    if (isConfirmed) {\n      await updatePerson({\n        id: findPerson[0].id,\n        name: newName,\n        number: newPhone,\n      });\n      setErrorMessage({ message: 'Updated ' + newName, color: 'green' });\n    }\n\n    if (!findPerson.length) {\n      await create({\n        name: newName,\n        number: newPhone,\n      });\n      setErrorMessage({ message: 'Added ' + newName, color: 'green' });\n    }\n\n    const data = await getAll();\n    setPersons(data.data);\n  }\n\n  const handleChangePhoneSearch = (event) => {\n    setNewPhoneSearch(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {!!errorMessage && <Notification message={errorMessage} />}\n      <Filter value={newPhoneSearch} onChange={handleChangePhoneSearch} />\n      <h2>add a new</h2>\n      <PersonForm newName={newName} handleChangeName={handleChangeName} handleChangePhone={handleChangePhone} handleAdd={handleAdd} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} newPhoneSearch={newPhoneSearch} deletePersonHandler={deletePersonHandler} />\n    </div>\n  )\n}\n\nexport default App;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(<App />, document.querySelector('#root'));\n});\n"],"sourceRoot":""}