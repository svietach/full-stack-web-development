{"version":3,"sources":["personService.js","index.js"],"names":["baseUrl","getAll","a","axios","get","create","newObject","post","response","data","deletePerson","id","delete","catch","err","status","Error","config","url","updatePerson","person","put","Filter","value","onChange","Persons","persons","newPhoneSearch","deletePersonHandler","map","name","indexOf","number","type","onClick","PersonForm","newName","newPhone","handleChangeName","handleChangePhone","handleAdd","Notification","message","className","color","App","useState","setPersons","setNewName","setNewPhone","setNewPhoneSearch","errorMessage","setErrorMessage","useEffect","console","log","findPerson","filter","isConfirmed","length","confirm","error","event","target","document","addEventListener","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.d9e64550.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons';\n\nexport const getAll = async () => {\n    return await axios.get(baseUrl);\n}\n\nexport const create = async (newObject) => {\n    try {\n        await axios.post(baseUrl, newObject);\n        return false;\n    } catch (error) {\n        // this is the way to access the error message\n        return error.response.data;\n    }\n}\n\nexport const deletePerson = async (id) => {\n    try {\n        await axios.delete(`${baseUrl}/${id}`).catch(err => {\n            if (err.response.status === 404) {\n                throw new Error(`${err.config.url} not found`);\n            }\n            throw err;\n        });;\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\nexport const updatePerson = async (person) => {\n    await axios.put(`${baseUrl}/${person.id}`, person);\n}","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom';\nimport { create, getAll, deletePerson, updatePerson } from './personService.js';\nimport './index.css';\n\nconst Filter = ({ value, onChange }) => {\n  return (\n    <div>\n      filter shown with: <input value={value} onChange={onChange} />\n    </div>\n  );\n}\n\nconst Persons = ({ persons, newPhoneSearch, deletePersonHandler }) => {\n\n  return (\n    <div>\n      {persons.map((person) => {\n        if (person.name.indexOf(newPhoneSearch) > -1) {\n          return <p>{person.name} {person.number} <button type=\"button\" onClick={() => deletePersonHandler(person)}>delete</button></p>;\n        } else {\n          return null;\n        }\n      })}\n    </div>\n  );\n}\n\nconst PersonForm = ({ newName, newPhone, handleChangeName, handleChangePhone, handleAdd }) => {\n  return (\n    <form>\n      <div>\n        name: <input value={newName} onChange={handleChangeName} /><br />\n        number: <input value={newPhone} onChange={handleChangePhone} />\n      </div>\n      <div>\n        <button type=\"button\" onClick={handleAdd}>add</button>\n      </div>\n    </form>\n  );\n}\n\nconst Notification = ({ message }) => {\n  return (\n    <p className={`error-message-${message.color}`}>{message.message}</p>\n  );\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([\n    { name: 'Arto Hellas' }\n  ])\n  const [newName, setNewName] = useState('')\n  const [newPhone, setNewPhone] = useState('')\n  const [newPhoneSearch, setNewPhoneSearch] = useState('')\n  const [errorMessage, setErrorMessage] = useState({});\n\n  useEffect(async () => {\n    const data = await getAll();\n    console.log(data.data);\n    setPersons(data.data);\n  }, []);\n\n  const deletePersonHandler = async (person) => {\n    const deleted = await deletePerson(person.id);\n    if (!deleted) {\n      setErrorMessage({ message: 'Information of ' + person.name + 'has already been removed from server', color: 'red' });\n    }\n    const data = await getAll();\n    setPersons(data.data);\n  }\n\n  const handleChangeName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleChangePhone = (event) => {\n    setNewPhone(event.target.value)\n  }\n\n  const addPerson = async (data) => {\n    await create(data);\n  }\n\n  const handleAdd = async () => {\n    const findPerson = persons.filter((person) => person.name === newName);\n    let isConfirmed = false;\n    if (!!findPerson.length) {\n      console.log(persons, findPerson);\n      // eslint-disable-next-line no-restricted-globals\n      isConfirmed = confirm(`${newName} is already added to phonebook, replace the old number with a new one ^_^`);\n    }\n\n    if (isConfirmed) {\n      await updatePerson({\n        id: findPerson[0].id,\n        name: newName,\n        number: newPhone,\n      });\n      setErrorMessage({ message: 'Updated ' + newName, color: 'green' });\n    }\n\n    if (!findPerson.length) {\n      const error = await create({\n        name: newName,\n        number: newPhone,\n      });\n\n      if (error) {\n        setErrorMessage({ message: error, color: 'red' });\n      } else {\n        setErrorMessage({ message: 'Added ' + newName, color: 'green' });\n      }\n\n    }\n\n    const data = await getAll();\n    setPersons(data.data);\n  }\n\n  const handleChangePhoneSearch = (event) => {\n    setNewPhoneSearch(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {!!errorMessage && <Notification message={errorMessage} />}\n      <Filter value={newPhoneSearch} onChange={handleChangePhoneSearch} />\n      <h2>add a new</h2>\n      <PersonForm newName={newName} handleChangeName={handleChangeName} handleChangePhone={handleChangePhone} handleAdd={handleAdd} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} newPhoneSearch={newPhoneSearch} deletePersonHandler={deletePersonHandler} />\n    </div>\n  )\n}\n\nexport default App;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(<App />, document.querySelector('#root'));\n});\n"],"sourceRoot":""}