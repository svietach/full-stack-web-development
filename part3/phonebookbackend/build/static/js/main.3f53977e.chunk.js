(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(3),o=t(5),s=t(0),u=t(4),i=t(16),d=t.n(i),l=t(6),p=t.n(l),h="/api/persons",f=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(h);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post(h,n).catch((function(e){if(400===e.response.status)throw console.log("err.response",e.response),console.log("err.response.data.error",e.response.data.error),new Error(e.response.data.error)}));case 3:return e.abrupt("return",!1);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("".concat(h,"/").concat(n)).catch((function(e){if(404===e.response.status)throw new Error("".concat(e.config.url," not found"));throw e}));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(h,"/").concat(n.id),n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=(t(41),function(e){var n=e.value,t=e.onChange;return Object(s.jsxs)("div",{children:["filter shown with: ",Object(s.jsx)("input",{value:n,onChange:t})]})}),x=function(e){var n=e.persons,t=e.newPhoneSearch,r=e.deletePersonHandler;return Object(s.jsx)("div",{children:n.map((function(e){return e.name.indexOf(t)>-1?Object(s.jsxs)("p",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{type:"button",onClick:function(){return r(e)},children:"delete"})]}):null}))})},O=function(e){var n=e.newName,t=e.newPhone,r=e.handleChangeName,a=e.handleChangePhone,c=e.handleAdd;return Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:r}),Object(s.jsx)("br",{}),"number: ",Object(s.jsx)("input",{value:t,onChange:a})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"button",onClick:c,children:"add"})})]})},g=function(e){var n=e.message;return Object(s.jsx)("p",{className:"error-message-".concat(n.color),children:n.message})},w=function(){var e=Object(u.useState)([{name:"Arto Hellas"}]),n=Object(o.a)(e,2),t=n[0],r=n[1],i=Object(u.useState)(""),d=Object(o.a)(i,2),l=d[0],p=d[1],h=Object(u.useState)(""),w=Object(o.a)(h,2),k=w[0],C=w[1],y=Object(u.useState)(""),P=Object(o.a)(y,2),S=P[0],N=P[1],A=Object(u.useState)({}),E=Object(o.a)(A,2),H=E[0],J=E[1];Object(u.useEffect)(Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:n=e.sent,console.log(n.data),r(n.data);case 5:case"end":return e.stop()}}),e)}))),[]);var L=function(){var e=Object(c.a)(a.a.mark((function e(n){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(n.id);case 2:return e.sent||J({message:"Information of "+n.name+"has already been removed from server",color:"red"}),e.next=6,f();case 6:t=e.sent,r(t.data);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(a.a.mark((function e(){var n,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter((function(e){return e.name===l})),c=!1,n.length&&(console.log(t,n),c=confirm("".concat(l," is already added to phonebook, replace the old number with a new one ^_^"))),!c){e.next=7;break}return e.next=6,m({id:n[0].id,name:l,number:k});case 6:J({message:"Updated "+l,color:"green"});case 7:if(n.length){e.next=12;break}return e.next=10,b({name:l,number:k});case 10:o=e.sent,J(o?{message:o,color:"red"}:{message:"Added "+l,color:"green"});case 12:return e.next=14,f();case 14:s=e.sent,r(s.data);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),!!H&&Object(s.jsx)(g,{message:H}),Object(s.jsx)(v,{value:S,onChange:function(e){N(e.target.value)}}),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(O,{newName:l,handleChangeName:function(e){p(e.target.value)},handleChangePhone:function(e){C(e.target.value)},handleAdd:q}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(x,{persons:t,newPhoneSearch:S,deletePersonHandler:L})]})};n.default=w;document.addEventListener("DOMContentLoaded",(function(){d.a.render(Object(s.jsx)(w,{}),document.querySelector("#root"))}))}},[[42,1,2]]]);
//# sourceMappingURL=main.3f53977e.chunk.js.map